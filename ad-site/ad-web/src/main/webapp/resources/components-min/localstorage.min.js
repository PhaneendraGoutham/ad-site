angular.module("angularLocalStorage",["ngCookies"]).factory("storage",["$parse","$cookieStore","$window","$log",function(l,m,g,n){var e="undefined"===typeof g.localStorage?void 0:g.localStorage,h="undefined"!==typeof e,k={parseValue:function(b){var a;try{a=angular.fromJson(b),"undefined"===typeof a&&(a=b),"true"===a&&(a=!0),"false"===a&&(a=!1),g.parseFloat(a)!==a||angular.isObject(a)||(a=g.parseFloat(a))}catch(c){a=b}return a}},d={set:function(b,a){if(!h)try{return m.put(b,a),a}catch(c){n.log("Local Storage not supported, make sure you have angular-cookies enabled.")}var d=
angular.toJson(a);e.setItem(b,d);return k.parseValue(d)},get:function(b){if(!h)try{return k.parseValue($.cookie(b))}catch(a){return null}b=e.getItem(b);return k.parseValue(b)},remove:function(b){if(!h)try{return m.remove(b),!0}catch(a){return!1}e.removeItem(b);return!0},bind:function(b,a,c){var e={defaultValue:"",storeName:""};c=angular.isString(c)?angular.extend({},e,{defaultValue:c}):angular.isUndefined(c)?e:angular.extend(e,c);var f=c.storeName||a;d.get(f)||d.set(f,c.defaultValue);l(a).assign(b,
d.get(f));b.$watch(a,function(a){angular.isDefined(a)&&d.set(f,a)},!0);return d.get(f)},unbind:function(b,a,c){c=c||a;l(a).assign(b,null);b.$watch(a,function(){});d.remove(c)},clearAll:function(){e.clear()}};return d}]);