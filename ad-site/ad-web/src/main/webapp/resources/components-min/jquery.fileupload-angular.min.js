(function(b){"function"===typeof define&&define.amd?define("jquery angular ./jquery.fileupload-image ./jquery.fileupload-audio ./jquery.fileupload-video ./jquery.fileupload-validate".split(" "),b):b()})(function(){angular.module("blueimp.fileupload",[]).provider("fileUpload",function(){var b=function(b){angular.element(this).fileupload("option","scope")().$evalAsync(b)},d=function(b,a){var c=a.files,f=c[0];angular.forEach(c,function(f,b){f._index=b;f.$state=function(){return a.state()};f.$processing=
function(){return a.processing()};f.$progress=function(){return a.progress()};f.$response=function(){return a.response()}});f.$submit=function(){if(!f.error)return a.submit()};f.$cancel=function(){return a.abort()}},e;e=this.defaults={handleResponse:function(b,a){var c=a.result&&a.result.files;if(c)a.scope().replace(a.files,c);else if(a.errorThrown||"error"===a.textStatus)a.files[0].error=a.errorThrown||a.textStatus},add:function(b,a){if(b.isDefaultPrevented())return!1;var c=a.scope(),f=[];angular.forEach(a.files,
function(a){f.push(a)});c.$apply(function(){d(c,a);var f=c.option("prependFiles")?"unshift":"push";Array.prototype[f].apply(c.queue,a.files)});a.process(function(){return c.process(a)}).always(function(){c.$apply(function(){d(c,a);c.replace(f,a.files)})}).then(function(){(c.option("autoUpload")||a.autoUpload)&&!1!==a.autoUpload&&a.submit()})},progress:function(b,a){if(b.isDefaultPrevented())return!1;a.scope().$apply()},done:function(b,a){if(b.isDefaultPrevented())return!1;var c=this;a.scope().$apply(function(){a.handleResponse.call(c,
b,a)})},fail:function(b,a){if(b.isDefaultPrevented())return!1;var c=this,f=a.scope();"abort"===a.errorThrown?f.clear(a.files):f.$apply(function(){a.handleResponse.call(c,b,a)})},stop:b,processstart:b,processstop:b,getNumberOfFiles:function(){var b=this.scope();return b.queue.length-b.processing()},dataType:"json",autoUpload:!1};this.$get=[function(){return{defaults:e}}]}).provider("formatFileSizeFilter",function(){var b={units:[{size:1E9,suffix:" GB"},{size:1E6,suffix:" MB"},{size:1E3,suffix:" KB"}]};
this.defaults=b;this.$get=function(){return function(d){if(!angular.isNumber(d))return"";for(var e=!0,g=0,a,c;e;){e=b.units[g];a=e.prefix||"";c=e.suffix||"";if(g===b.units.length-1||d>=e.size)return a+(d/e.size).toFixed(2)+c;g+=1}}}}).controller("FileUploadController",["$scope","$element","$attrs","$window","fileUpload",function(b,d,e,g,a){var c={progress:function(){return d.fileupload("progress")},active:function(){return d.fileupload("active")},option:function(b,a){return d.fileupload("option",
b,a)},add:function(b){return d.fileupload("add",b)},send:function(b){return d.fileupload("send",b)},process:function(b){return d.fileupload("process",b)},processing:function(b){return d.fileupload("processing",b)}};b.disabled=!g.jQuery.support.fileInput;b.queue=b.queue||[];b.clear=function(b){var a=this.queue,c=a.length,d=b,e=1;angular.isArray(b)&&(d=b[0],e=b.length);for(;c;)if(c-=1,a[c]===d)return a.splice(c,e)};b.replace=function(b,a){var c=this.queue,d=b[0],e;for(e=0;e<c.length;e+=1)if(c[e]===
d){for(d=0;d<a.length;d+=1)c[e+d]=a[d];break}};b.applyOnQueue=function(b){var a=this.queue.slice(0),c,d;for(c=0;c<a.length;c+=1)if(d=a[c],d[b])d[b]()};b.submit=function(){this.applyOnQueue("$submit")};b.cancel=function(){this.applyOnQueue("$cancel")};angular.extend(b,c);d.fileupload(angular.extend({scope:function(){return b}},a.defaults)).on("fileuploadadd",function(a,c){c.scope=b.option("scope")}).on("fileuploadfail",function(b,a){if("abort"!==a.errorThrown&&a.dataType&&a.dataType.indexOf("json")===
a.dataType.length-4)try{a.result=angular.fromJson(a.jqXHR.responseText)}catch(c){}}).on("fileuploadadd fileuploadsubmit fileuploadsend fileuploaddone fileuploadfail fileuploadalways fileuploadprogress fileuploadprogressall fileuploadstart fileuploadstop fileuploadchange fileuploadpaste fileuploaddrop fileuploaddragover fileuploadchunksend fileuploadchunkdone fileuploadchunkfail fileuploadchunkalways fileuploadprocessstart fileuploadprocess fileuploadprocessdone fileuploadprocessfail fileuploadprocessalways fileuploadprocessstop",
function(a,c){b.$emit(a.type,c).defaultPrevented&&a.preventDefault()}).on("remove",function(){for(var a in c)c.hasOwnProperty(a)&&delete b[a]});b.$watch(e.fileUpload,function(a){a&&d.fileupload("option",a)})}]).controller("FileUploadProgressController",["$scope","$attrs","$parse",function(b,d,e){var g=e(d.fileUploadProgress),a=function(){var a=g(b);a&&a.total&&(b.num=Math.floor(a.loaded/a.total*100))};a();b.$watch(d.fileUploadProgress+".loaded",function(b,d){b!==d&&a()})}]).controller("FileUploadPreviewController",
["$scope","$element","$attrs",function(b,d,e){b.$watch(e.fileUploadPreview+".preview",function(b){b&&d.empty().append(b)})}]).directive("fileUpload",function(){return{controller:"FileUploadController",scope:!0}}).directive("fileUploadProgress",function(){return{controller:"FileUploadProgressController",scope:!0}}).directive("fileUploadPreview",function(){return{controller:"FileUploadPreviewController"}}).directive("download",function(){return function(b,d){d.on("dragstart",function(b){try{b.originalEvent.dataTransfer.setData("DownloadURL",
["application/octet-stream",d.prop("download"),d.prop("href")].join(":"))}catch(g){}})}})});